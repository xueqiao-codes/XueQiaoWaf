<UserControl x:Class="Manage.Presentations.Views.FundAccounEditDialogContentView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:convert="clr-namespace:XueQiaoFoundation.BusinessResources.Converters;assembly=XueQiaoFoundation.BusinessResources"
             xmlns:uiconvert="clr-namespace:XueQiaoFoundation.UI.Converters;assembly=XueQiaoFoundation.UI"
             xmlns:Styles="clr-namespace:XueQiaoFoundation.UI.Styles;assembly=XueQiaoFoundation.UI"
             xmlns:Controls="clr-namespace:XueQiaoFoundation.UI.Controls;assembly=XueQiaoFoundation.UI"
             xmlns:tradehosting="clr-namespace:xueqiao.trade.hosting;assembly=IDLAutoGenerated"
             xmlns:broker="clr-namespace:xueqiao.broker;assembly=IDLAutoGenerated"
             xmlns:sys="clr-namespace:System;assembly=mscorlib"
             mc:Ignorable="d" 
             Width="440"
             x:Name="ContentViewRoot">
    <UserControl.Resources>
        <convert:BrokerPlatform2DisplayConverter x:Key="BrokerPlatform2DisplayConverter"/>
        <convert:HostingTradeAccountField2DisplayConverter x:Key="HostingTradeAccountField2DisplayConverter"/>
        <uiconvert:EqualityToVisibilityConverter x:Key="EqualsToVisibleConverter" CollapsedWhenEquals="False" CollapsedWhenNotEquals="True"/>
        <sys:Boolean x:Key="TrueValue">True</sys:Boolean>
        <sys:Boolean x:Key="FalseValue">False</sys:Boolean>

        <Style x:Key="ExtraInfoTextBox" TargetType="TextBox" BasedOn="{StaticResource TextBoxStyleDefault}">
            <Setter Property="TextWrapping" Value="Wrap"/>
            <Setter Property="AcceptsReturn" Value="True"/>
            <Setter Property="VerticalScrollBarVisibility" Value="Auto"/>
        </Style>
        
    </UserControl.Resources>
    <DockPanel LastChildFill="True" Margin="20,20,20,10">
        <StackPanel DockPanel.Dock="Bottom"  
                    HorizontalAlignment="Center"
                    Margin="0,20,0,0"
                    Orientation="Horizontal">
            <Button Content="保存"
                    Command="{Binding OkCmd}"
                    Style="{StaticResource BordedButtonPrimary3}"/>
            <Button Content="取消" Margin="10,0,0,0"
                    Command="{Binding CancelCmd}"/>
        </StackPanel>
        <StackPanel Orientation="Vertical" Grid.IsSharedSizeScope="True">
            <HeaderedContentControl Header="券商(经纪商)" Style="{StaticResource HorizonalOrientationFieldHeaderedStyle}">
                <TextBlock Text="{Binding AccountInfo.BrokerName}" Margin="10,0,0,0"/>
            </HeaderedContentControl>
            <HeaderedContentControl Header="交易接口" Style="{StaticResource HorizonalOrientationFieldHeaderedStyle}"
                                        Margin="0,10,0,0">
                <TextBlock Text="{Binding AccountInfo.AccountMeta.BrokerTechPlatform, Converter={StaticResource HostingTradeAccountField2DisplayConverter}, ConverterParameter={x:Static convert:HostingUser2DisplayField.BrokerTechPlatform}}" 
                               Margin="10,0,0,0"/>
            </HeaderedContentControl>
            <HeaderedContentControl Header="席位" Style="{StaticResource HorizonalOrientationFieldHeaderedStyle}"
                                    Margin="0,10,0,0">
                <ComboBox ItemsSource="{Binding AvailableAccessEntries}"
                          IsSynchronizedWithCurrentItem="True"
                          SelectedItem="{Binding SelectedAccessEntry, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                    <ComboBox.ItemTemplate>
                        <DataTemplate DataType="{x:Type broker:BrokerAccessEntry}">
                            <TextBlock Text="{Binding AccessName}"/>
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>
                <!--<TextBlock Text="{Binding AccountInfo.BrokerAccessName}" Margin="10,0,0,0"/>-->
            </HeaderedContentControl>
            <HeaderedContentControl Header="账号" Style="{StaticResource HorizonalOrientationFieldHeaderedStyle}"
                                        Margin="0,10,0,0">
                <Grid>
                    <TextBlock 
                        Margin="10,0,0,0"
                        Text="{Binding AccountInfo.AccountMeta.LoginUserName}"
                        Visibility="{Binding AccountInfo.AccountMeta.HadBeenActived, 
                                                Converter={StaticResource EqualsToVisibleConverter}, 
                                                ConverterParameter={StaticResource TrueValue}}"/>
                    <TextBox Text="{Binding EditAccount.LoginUserName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                         Visibility="{Binding AccountInfo.AccountMeta.HadBeenActived, 
                                                Converter={StaticResource EqualsToVisibleConverter}, 
                                                ConverterParameter={StaticResource FalseValue}}"/>
                </Grid>
            </HeaderedContentControl>
            <HeaderedContentControl Header="密码" Style="{StaticResource HorizonalOrientationFieldHeaderedStyle}"
                                    Margin="0,10,0,0">
                <!--
                <TextBox Text="{Binding EditPassword, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                -->
                <Controls:CustomPasswordBox
                    Styles:CustomPasswordBoxHelper.Attach="True"
                    Styles:CustomPasswordBoxHelper.Password="{Binding EditPassword, Mode=OneWayToSource, UpdateSourceTrigger=PropertyChanged}"/>
            </HeaderedContentControl>
            <HeaderedContentControl Header="" Style="{StaticResource HorizonalOrientationFieldHeaderedStyle}"
                                    Margin="0,4,0,0">
                <TextBlock Foreground="{DynamicResource ContentBrush2}" Margin="10,0,0,0">* 留空则不修改密码</TextBlock>
            </HeaderedContentControl>
            <HeaderedContentControl Header="账户简称" Style="{StaticResource HorizonalOrientationFieldHeaderedStyle}"
                                    Margin="0,10,0,0">
                <TextBox Text="{Binding EditAccount.AccountAlias, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
            </HeaderedContentControl>

            <!-- ESUNNY 9.0 extra info -->
            <StackPanel Orientation="Vertical" Margin="0,10,0,0">
                <StackPanel.Style>
                    <Style TargetType="StackPanel">
                        <Setter Property="Visibility" Value="Collapsed"/>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding AccountInfo.AccountMeta.BrokerTechPlatform}" Value="{x:Static tradehosting:BrokerTechPlatform.TECH_ESUNNY_9}">
                                <Setter Property="Visibility" Value="Visible"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </StackPanel.Style>
                <HeaderedContentControl Header="交易授权码" Style="{StaticResource HorizonalOrientationFieldHeaderedStyle}">
                    <TextBox Style="{StaticResource ExtraInfoTextBox}" MaxHeight="100"
                             Text="{Binding EditAccount.Es9_AuthCode, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                </HeaderedContentControl>
            </StackPanel>

            <!-- ESUNNY 3.0 extra info -->
            <StackPanel Orientation="Vertical" Margin="0,10,0,0">
                <StackPanel.Style>
                    <Style TargetType="StackPanel">
                        <Setter Property="Visibility" Value="Collapsed"/>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding AccountInfo.AccountMeta.BrokerTechPlatform}" Value="{x:Static tradehosting:BrokerTechPlatform.TECH_ESUNNY_3}">
                                <Setter Property="Visibility" Value="Visible"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </StackPanel.Style>
                <HeaderedContentControl Header="APP ID" Style="{StaticResource HorizonalOrientationFieldHeaderedStyle}">
                    <TextBox Style="{StaticResource ExtraInfoTextBox}" MaxHeight="100"
                             Text="{Binding EditAccount.Es3_AppId, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                </HeaderedContentControl>
                <HeaderedContentControl Header="Cert Info" Style="{StaticResource HorizonalOrientationFieldHeaderedStyle}"
                                    Margin="0,10,0,0">
                    <TextBox Style="{StaticResource ExtraInfoTextBox}" MaxHeight="100"
                             Text="{Binding EditAccount.Es3_CertInfo, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                </HeaderedContentControl>
            </StackPanel>

            <!-- CTP extra info -->
            <StackPanel Orientation="Vertical" Margin="0,10,0,0">
                <StackPanel.Style>
                    <Style TargetType="StackPanel">
                        <Setter Property="Visibility" Value="Collapsed"/>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding AccountInfo.AccountMeta.BrokerTechPlatform}" Value="{x:Static tradehosting:BrokerTechPlatform.TECH_CTP}">
                                <Setter Property="Visibility" Value="Visible"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </StackPanel.Style>
                <HeaderedContentControl Header="APPID" Style="{StaticResource HorizonalOrientationFieldHeaderedStyle}">
                    <TextBox Style="{StaticResource ExtraInfoTextBox}" MaxHeight="100"
                             Text="{Binding EditAccount.Ctp_AppId, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                </HeaderedContentControl>
                <HeaderedContentControl Header="授权码" Style="{StaticResource HorizonalOrientationFieldHeaderedStyle}"
                                    Margin="0,10,0,0">
                    <TextBox Style="{StaticResource ExtraInfoTextBox}" MaxHeight="100" 
                             Text="{Binding EditAccount.Ctp_AuthCode, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                </HeaderedContentControl>
            </StackPanel>
        </StackPanel>
    </DockPanel>
</UserControl>
