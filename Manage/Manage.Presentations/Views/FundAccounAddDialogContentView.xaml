<UserControl x:Class="Manage.Presentations.Views.FundAccounAddDialogContentView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:actb="clr-namespace:XueQiaoFoundation.UI.Controls.AutoCompleteTextBox;assembly=XueQiaoFoundation.UI"
             xmlns:Styles="clr-namespace:XueQiaoFoundation.UI.Styles;assembly=XueQiaoFoundation.UI"
             xmlns:Controls="clr-namespace:XueQiaoFoundation.UI.Controls;assembly=XueQiaoFoundation.UI"
             xmlns:convert="clr-namespace:XueQiaoFoundation.BusinessResources.Converters;assembly=XueQiaoFoundation.BusinessResources"
             xmlns:uiconvert="clr-namespace:XueQiaoFoundation.UI.Converters;assembly=XueQiaoFoundation.UI"
             xmlns:broker_model="clr-namespace:xueqiao.broker;assembly=IDLAutoGenerated"
             mc:Ignorable="d" 
             Width="440"
             x:Name="ContentViewRoot">
    <UserControl.Resources>
        <convert:BrokerPlatform2DisplayConverter x:Key="BrokerPlatform2DisplayConverter"/>
        <uiconvert:EqualityToVisibilityConverter x:Key="EqualsToVisibleConverter" CollapsedWhenEquals="False" CollapsedWhenNotEquals="True"/>
        <BooleanToVisibilityConverter x:Key="True2Visible" />

        <Style x:Key="ExtraInfoTextBox" TargetType="TextBox" BasedOn="{StaticResource TextBoxStyleDefault}">
            <Setter Property="TextWrapping" Value="Wrap"/>
            <Setter Property="AcceptsReturn" Value="True"/>
            <Setter Property="VerticalScrollBarVisibility" Value="Auto"/>
        </Style>
        
    </UserControl.Resources>
    <DockPanel LastChildFill="True" Margin="20,20,20,10">
        <StackPanel DockPanel.Dock="Bottom"  
                    HorizontalAlignment="Center"
                    Margin="0,20,0,0"
                    Orientation="Horizontal">
            <Button Content="提交"
                    Command="{Binding SubmitCmd}"
                    Style="{StaticResource BordedButtonPrimary3}"/>
            <Button Content="取消" Margin="10,0,0,0"
                    Command="{Binding CancelCmd}"/>
        </StackPanel>
        <StackPanel Orientation="Vertical" Grid.IsSharedSizeScope="True">
            
            <!-- auto complete 形式 -->
            <StackPanel Orientation="Vertical">
                <HeaderedContentControl Header="券商(经纪商)" Style="{StaticResource HorizonalOrientationFieldHeaderedStyle}">
                    <actb:AutoCompleteTextBox
                        Watermark="搜索或选择券商名称"
                        IconPlacement="Left"
                        IconVisibility="Collapsed"
                        DisplayMember="Node.CnName"
                        Provider="{Binding BrokerListSuggestionProvider}"
                        SelectedItem="{Binding SelectedBrokerNode, Mode=TwoWay}">
                        <actb:AutoCompleteTextBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Node.CnName}"/>
                            </DataTemplate>
                        </actb:AutoCompleteTextBox.ItemTemplate>
                        <actb:AutoCompleteTextBox.LoadingContent>
                            <TextBlock Text="加载..."
                               Margin="5"
                               FontSize="14" />
                        </actb:AutoCompleteTextBox.LoadingContent>
                    </actb:AutoCompleteTextBox>
                </HeaderedContentControl>
                <HeaderedContentControl Header="交易接口" Style="{StaticResource HorizonalOrientationFieldHeaderedStyle}"
                                        Margin="0,10,0,0">
                    <ComboBox ItemsSource="{Binding SelectedBrokerNode.Children}" 
                              SelectedItem="{Binding SelectedBrokerPlatformNode, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                              IsSynchronizedWithCurrentItem="True">
                        <ComboBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Node, Converter={StaticResource BrokerPlatform2DisplayConverter}}"/>
                            </DataTemplate>
                        </ComboBox.ItemTemplate>
                    </ComboBox>
                </HeaderedContentControl>
                <HeaderedContentControl Header="席位" Style="{StaticResource HorizonalOrientationFieldHeaderedStyle}"
                                        Margin="0,10,0,0">
                    <ComboBox ItemsSource="{Binding SelectedBrokerPlatformNode.Children}" 
                              SelectedItem="{Binding SelectedBrokerAccessEntry, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                              IsSynchronizedWithCurrentItem="True">
                        <ComboBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding AccessName}"/>
                            </DataTemplate>
                        </ComboBox.ItemTemplate>
                    </ComboBox>
                </HeaderedContentControl>
            </StackPanel>

            <HeaderedContentControl Header="账号" Style="{StaticResource HorizonalOrientationFieldHeaderedStyle}"
                                        Margin="0,10,0,0">
                <TextBox Text="{Binding AddAccount.LoginUserName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
            </HeaderedContentControl>
            <HeaderedContentControl Header="密码" Style="{StaticResource HorizonalOrientationFieldHeaderedStyle}"
                                    Margin="0,10,0,0">
                <!--
                <TextBox Text="{Binding AddAccount.LoginPasswd, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                -->
                <Controls:CustomPasswordBox
                    Styles:CustomPasswordBoxHelper.Attach="True"
                    Styles:CustomPasswordBoxHelper.Password="{Binding AddAccount.LoginPasswd, Mode=OneWayToSource, UpdateSourceTrigger=PropertyChanged}"/>
            </HeaderedContentControl>
            <HeaderedContentControl 
                Header="账户简称" Style="{StaticResource HorizonalOrientationFieldHeaderedStyle}"
                Margin="0,10,0,0"
                Visibility="{Binding ShowAccountAliasAddRow, Converter={StaticResource True2Visible}}">
                <TextBox Text="{Binding AddAccount.AccountAlias, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
            </HeaderedContentControl>

            <!-- ESUNNY 9.0 extra info -->
            <StackPanel Margin="0,10,0,0">
                <StackPanel.Style>
                    <Style TargetType="StackPanel">
                        <Setter Property="Visibility" Value="Collapsed"/>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding SelectedBrokerAccessEntry.Platform}" Value="{x:Static broker_model:BrokerPlatform.ESUNNY}">
                                <Setter Property="Visibility" Value="Visible"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </StackPanel.Style>
                <HeaderedContentControl Header="交易授权码" Style="{StaticResource HorizonalOrientationFieldHeaderedStyle}">
                    <TextBox Style="{StaticResource ExtraInfoTextBox}" MaxHeight="100"
                             Text="{Binding AddAccount.Es9_AuthCode, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                </HeaderedContentControl>
            </StackPanel>

            <!-- ESUNNY 3.0 extra info -->
            <StackPanel Orientation="Vertical" Margin="0,10,0,0">
                <StackPanel.Style>
                    <Style TargetType="StackPanel">
                        <Setter Property="Visibility" Value="Collapsed"/>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding SelectedBrokerAccessEntry.Platform}" Value="{x:Static broker_model:BrokerPlatform.ESUNNY_3}">
                                <Setter Property="Visibility" Value="Visible"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </StackPanel.Style>
                <HeaderedContentControl Header="APP ID" Style="{StaticResource HorizonalOrientationFieldHeaderedStyle}">
                    <TextBox Style="{StaticResource ExtraInfoTextBox}" MaxHeight="100"
                             Text="{Binding AddAccount.Es3_AppId, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                </HeaderedContentControl>
                <HeaderedContentControl Header="Cert Info" Style="{StaticResource HorizonalOrientationFieldHeaderedStyle}"
                                    Margin="0,10,0,0">
                    <TextBox Style="{StaticResource ExtraInfoTextBox}" MaxHeight="100" 
                             Text="{Binding AddAccount.Es3_CertInfo, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                </HeaderedContentControl>
            </StackPanel>

            <!-- CTP extra info -->
            <StackPanel Orientation="Vertical" Margin="0,10,0,0">
                <StackPanel.Style>
                    <Style TargetType="StackPanel">
                        <Setter Property="Visibility" Value="Collapsed"/>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding SelectedBrokerAccessEntry.Platform}" Value="{x:Static broker_model:BrokerPlatform.CTP}">
                                <Setter Property="Visibility" Value="Visible"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </StackPanel.Style>
                <HeaderedContentControl Header="APPID" Style="{StaticResource HorizonalOrientationFieldHeaderedStyle}">
                    <TextBox Style="{StaticResource ExtraInfoTextBox}" MaxHeight="100"
                             Text="{Binding AddAccount.Ctp_AppId, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                </HeaderedContentControl>
                <HeaderedContentControl Header="授权码" Style="{StaticResource HorizonalOrientationFieldHeaderedStyle}"
                                    Margin="0,10,0,0">
                    <TextBox Style="{StaticResource ExtraInfoTextBox}" MaxHeight="100" 
                             Text="{Binding AddAccount.Ctp_AuthCode, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                </HeaderedContentControl>
            </StackPanel>
        </StackPanel>
    </DockPanel>
</UserControl>